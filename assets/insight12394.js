import{ae as i,ar as e,aq as h,ah as o,ad as c}from"./usetoast.esm12394.js";import"./helpers12394.js";class n{static async fetchAll(t){return(await i("/insights",t)).data.insights}static async getInsightDetail(t){return(await i(`/insights/${t}`)).data.news_insight}static async updateInsight(t){return(await e(`/insights/${t.id}/update`,t.formData)).data.news_insight}static async deleteInsight(t){return(await h(`/insights/${t}`)).data.news_insight}static async importTarget(t){return(await e(`/insights/${t.id}/upload_target`,t.formData)).data.updated_targets}static async insightRanking(t){return(await i("/insights/ranking",t)).data.ranking}static async downloadRanking(t){return(await i("/insights/download_ranking",t)).data.ranking}static async getClusterDetail(t){return(await i("/insights/cluster_detail",t)).data.data}static async resetInsight(t){return(await o(`/insights/${t.id}/cleanup_data`,{})).data.insight}}const r=localStorage.getItem("rankingNavParams"),l=r?JSON.parse(r):null,u=c({id:"insight",state:()=>({insights:{},ranking:[],num_target:"",ranking_params:l,rankig_detail:[]}),getters:{getCurrentInsights:a=>a.insights,getCurrentRanking:a=>a.ranking,getNumTarget:a=>a.num_target,getRankingParams:a=>a.ranking_params,getRankingDetail:a=>a.rankig_detail},actions:{async fetchAllInsights(a){await n.fetchAll(a).then(t=>this.insights=t)},async fetchInsightDetail(a){await n.getInsightDetail(a).then(t=>this.insights=t)},async updateInsight(a){await n.updateInsight(a).then(t=>this.insights=t)},async deleteInsight(a){await n.deleteInsight(a).then(t=>this.insights=t)},async importTarget(a){await n.importTarget(a).then(t=>this.num_target=t)},async getInsightsRanking(a){await n.insightRanking(a).then(t=>{let s=1;t.forEach(g=>{g.id=s,s++}),this.ranking=t})},async downloadRanking(a){await n.insightRanking(a)},saveRankingParams(a){this.ranking_params=a,localStorage.setItem("rankingNavParams",JSON.stringify(this.ranking_params))},async fetchClusterDetail(a){await n.getClusterDetail(a).then(t=>{this.rankig_detail=t})},async resetInsight(a){await n.resetInsight(a)}}});export{u};
