import{o as Oe,r,af as ve,z as Pe,_ as ge,b as x,l as _e,e as d,f as v,g as o,E as P,C as V,h as c,m as q,j as y,i as E,B as k,w as $,q as Ge,u as Ye,c as W,n as He,a as Je,F as ce,D as Ke}from"./usetoast.esm86487.js";import{a as N,e as Q,s as Z,h as U,u as We,b as Xe,c as Ze,d as $e,f as et,g as tt}from"./helpers86487.js";import{u as ye}from"./survey86487.js";import{u as at}from"./user86487.js";import{u as lt}from"./group86487.js";import{a as te,f as ae}from"./formatData86487.js";import{A as nt}from"./AudienceCard86487.js";import{U as st}from"./UploadImageCard86487.js";import{u as fe}from"./useconfirm.esm86487.js";import{v as me}from"./runtime-dom.esm-bundler86487.js";import"./datetime86487.js";const ot={props:["index","tmp_survey","languages","submitForm"],setup(i,n){Oe(()=>{F.value=i.tmp_survey.questions[i.index].typology,b.value=i.tmp_survey.questions[i.index].translations[i.languages[0]].text,i.languages[1]&&(C.value=i.tmp_survey.questions[i.index].translations[i.languages[1]].text)});const a=r(),e=r(),I=r([]),z=ye(),f=ve(),A=r([]),F=r(),b=r(),C=r();fe();const j=r([{label:"Open",value:"open"},{label:"Closed",value:"closed"}]),s=r(!1),p=function(){const m={};let g=i.languages[0],u=i.languages[1];m[g]&&m[g].text?m[g].text=a.value:m[g]={text:a.value},m[u]&&m[u].text?m[u].text=e.value:m[u]={text:e.value},I.value||(I.value=[]);const S={translation:m,index:i.index};n.emit("updateAnswer",S),a.value="",e.value=""},R=async function(m,g){m?await z.deleteAnswerFromSurvey(m).then(()=>{N(f,{message:"Answer deleted correctly.",title:""}),i.tmp_survey.questions[i.index].answers.splice(g,1)}).catch(u=>{Q(f,u)}):i.tmp_survey.questions[i.index].answers.splice(g,1)},G=m=>{let{newData:g}=m;const u=g.translations[i.languages[0]].id;if(u&&B(u,g.translations[i.languages[0]].text),i.languages[1]){const S=g.translations[i.languages[1]].id;S&&B(S,g.translations[i.languages[1]].text)}},B=async function(m,g){const u={id:m,text:g};await z.updateAnswer(u).then(()=>{N(f,{message:"Answer update correctly.",title:""})}).catch(S=>{Q(f,S)})},L=function(m){if(i.submitForm)return m==""||m==null?s.value=!0:s.value=!1,s.value};return Pe(i.tmp_survey,async(m,g)=>{i.tmp_survey.questions[i.index]&&(F.value=i.tmp_survey.questions[i.index].typology,b.value=i.tmp_survey.questions[i.index].translations[i.languages[0]].text,i.languages[1]&&(C.value=i.tmp_survey.questions[i.index].translations[i.languages[1]].text))}),{newAnswer:a,editingRows:A,typology:F,surveyTypology:j,text:b,text2:C,newAnswer2:e,addAnswer:p,deleteAnswer:R,onRowEditSave:G,validateField:L}}};const it={key:0,class:"formgrid grid col-12 px-0 align-items-center"},ut={class:"field col-5"},rt={for:"note"},dt={class:"uppercase"},ct={key:0,class:"p-error"},mt={key:0,class:"field col-5"},vt={for:"note"},gt={class:"uppercase"},_t={key:0,class:"p-error"},yt={class:"col-12"},ft={class:"field col-2 flex flex-column pl-0"},ht=o("label",{for:"typology"},"Typology",-1),wt={key:1,class:"field col-12 flex flex-column mt-3"},bt={class:"field flex align-items-center"},xt={class:"field col-5 p-0 mr-3"},pt={for:"answer"},Ct={class:"uppercase"},Vt={key:0,class:"p-error"},kt={key:0,class:"field col-5 p-0"},St={for:"answer"},Tt={class:"uppercase"},At={key:0,class:"p-error"},qt={key:0},Ft={key:1},Ut={key:0},Dt={key:1};function Et(i,n,a,e,I,z){const f=x("InputText"),A=x("Dropdown"),F=x("Button"),b=x("Column"),C=x("DataTable"),j=_e("tooltip");return a.languages?(d(),v("div",it,[o("div",ut,[o("label",rt,[P("Question* "),o("span",dt,"("+V(a.languages[0])+")",1)]),c(f,{type:"text",modelValue:e.text,"onUpdate:modelValue":[n[0]||(n[0]=s=>e.text=s),n[1]||(n[1]=s=>i.$emit("updateText",{index:a.index,text:e.text,lang:a.languages[0]}))],class:q(["w-full",{"p-invalid":e.validateField(e.text)}])},null,8,["modelValue","class"]),e.validateField(e.text)?(d(),v("small",ct,"Campo obbligatorio.")):y("",!0)]),a.languages[1]?(d(),v("div",mt,[o("label",vt,[P("Question* "),o("span",gt,"("+V(a.languages[1])+")",1)]),c(f,{type:"text",modelValue:e.text2,"onUpdate:modelValue":[n[2]||(n[2]=s=>e.text2=s),n[3]||(n[3]=s=>i.$emit("updateText",{index:a.index,text:e.text2,lang:a.languages[1]}))],class:q(["w-full",{"p-invalid":e.validateField(e.text2)}])},null,8,["modelValue","class"]),e.validateField(e.text2)?(d(),v("small",_t,"Campo obbligatorio.")):y("",!0)])):y("",!0),o("div",yt,[o("div",ft,[ht,c(A,{modelValue:e.typology,"onUpdate:modelValue":n[4]||(n[4]=s=>e.typology=s),options:e.surveyTypology,optionLabel:"label",optionValue:"value",placeholder:"",class:"capitalize",onChange:n[5]||(n[5]=s=>i.$emit("updateTypology",{index:a.index,typology:e.typology}))},null,8,["modelValue","options"])])]),e.typology=="closed"?(d(),v("div",wt,[o("div",bt,[o("div",xt,[o("label",pt,[P("Answer* "),o("span",Ct,"("+V(a.languages[0])+")",1)]),c(f,{type:"text",modelValue:e.newAnswer,"onUpdate:modelValue":n[6]||(n[6]=s=>e.newAnswer=s),class:q(["w-full",{"p-invalid":a.tmp_survey.answers&&a.tmp_survey.answers.length<1&&e.validateField(e.newAnswer)}]),id:"answer"},null,8,["modelValue","class"]),a.tmp_survey.answers&&a.tmp_survey.answers.length<1&&e.validateField(e.newAnswer)?(d(),v("small",Vt,"Campo obbligatorio.")):y("",!0)]),a.languages[1]?(d(),v("div",kt,[o("label",St,[P("Answer* "),o("span",Tt,"("+V(a.languages[1])+")",1)]),c(f,{type:"text",modelValue:e.newAnswer2,"onUpdate:modelValue":n[7]||(n[7]=s=>e.newAnswer2=s),class:q(["w-full",{"p-invalid":a.tmp_survey.answers&&a.tmp_survey.answers.length<1&&e.validateField(e.newAnswer2)}]),id:"answer"},null,8,["modelValue","class"]),a.tmp_survey.answers&&a.tmp_survey.answers.length<1&&e.validateField(e.newAnswer2)?(d(),v("small",At,"Campo obbligatorio.")):y("",!0)])):y("",!0),c(F,{label:"Add answer",class:"p-button-outlined ml-3 mt-2",onClick:e.addAnswer,disabled:!e.newAnswer||a.languages[1]&&!e.newAnswer2},null,8,["onClick","disabled"])]),a.tmp_survey.questions&&a.tmp_survey.questions[a.index]&&a.tmp_survey.questions[a.index].answers.length>0?(d(),E(C,{key:0,value:a.tmp_survey.questions[a.index].answers,responsiveLayout:"scroll",editMode:"row",editingRows:e.editingRows,"onUpdate:editingRows":n[8]||(n[8]=s=>e.editingRows=s),onRowEditSave:e.onRowEditSave},{default:k(()=>[c(b,{field:"",header:a.languages[0].toUpperCase()},{body:k(({data:s})=>[s.translations[a.languages[0]]&&(s.translations[a.languages[0]].text||s.translations[a.languages[0]].text=="")?(d(),v("span",qt,V(s.translations[a.languages[0]].text),1)):(d(),v("span",Ft,V(s.translations[a.languages[0]]),1))]),editor:k(({data:s})=>[s.translations[a.languages[0]]&&(s.translations[a.languages[0]].text||s.translations[a.languages[0]].text=="")?(d(),E(f,{key:0,class:"w-full",modelValue:s.translations[a.languages[0]].text,"onUpdate:modelValue":p=>s.translations[a.languages[0]].text=p},null,8,["modelValue","onUpdate:modelValue"])):(d(),E(f,{key:1,modelValue:s.translations[a.languages[0]],"onUpdate:modelValue":p=>s.translations[a.languages[0]]=p,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"]))]),_:1},8,["header"]),a.languages[1]?(d(),E(b,{key:0,field:"",header:a.languages[1].toUpperCase()},{body:k(({data:s})=>[s.translations[a.languages[1]]&&(s.translations[a.languages[1]].text||s.translations[a.languages[1]].text=="")?(d(),v("span",Ut,V(s.translations[a.languages[1]].text),1)):(d(),v("span",Dt,V(s.translations[a.languages[1]]),1))]),editor:k(({data:s})=>[s.translations[a.languages[1]]&&(s.translations[a.languages[1]].text||s.translations[a.languages[1]].text=="")?(d(),E(f,{key:0,class:"w-full",modelValue:s.translations[a.languages[1]].text,"onUpdate:modelValue":p=>s.translations[a.languages[1]].text=p},null,8,["modelValue","onUpdate:modelValue"])):(d(),E(f,{key:1,modelValue:s.translations[a.languages[1]],"onUpdate:modelValue":p=>s.translations[a.languages[1]]=p,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"]))]),_:1},8,["header"])):y("",!0),c(b,{rowEditor:!0,style:{width:"10%","min-width":"8rem"},bodyStyle:"text-align:center"}),c(b,{header:"",style:{width:"9rem"}},{body:k(({data:s,index:p})=>[$(c(F,{type:"button","aria-haspopup":"true","aria-controls":"overlay_menu",class:"p-button-text p-button-rounded text-300 surface-200 mr-3",icon:"pi pi-trash",onClick:R=>e.deleteAnswer(s.id,p)},null,8,["onClick"]),[[j,"Delete",void 0,{top:!0}]])]),_:1})]),_:1},8,["value","editingRows","onRowEditSave"])):y("",!0)])):y("",!0)])):y("",!0)}const It=ge(ot,[["render",Et]]),Bt={setup(){const i=r({icon:"pi pi-home",to:"/surveys"}),n=r(""),a=r([{label:""}]),e=r({}),I=r(0),z=r(),f=r(!1),A=r(),F=r(!0),b=r(!0),C=r(!0),j=r({}),s=r(),p=r(""),R=r({}),G=r([]),B=r(),L=r(),m=r([{label:"Online",value:!0},{label:"Offline",value:!1}]),g=r(!1),u=r([]),S=r(0),_=r([]),Y=Ge(),h=ve(),le=fe(),D=ye(),he=Ye(),we=lt(),be=at(),H=r(!1),xe=r({sellout_code:{value:"",matchMode:"contains"},full_name:{value:"",matchMode:"contains"}}),T=W(()=>D.getCurrentSurvey),ne=W(()=>he.getSelectedCountry),pe=W(()=>D.allSurveys),Ce=W(()=>be.userRoles),Ve=W(()=>we.allGroups),X=async function(l){Z(),D.fetchSurveyDetail(l).then(()=>{U(),Te()}).catch(t=>{U(),Q(h,t)})},se=async function(){const l=new Map;await D.fetchAllSurveys(l).catch(t=>{Q(h,t)})},ke=async function(){const l={id:e.value.id,formData:oe()};D.updateSurvey(l).then(()=>{U(),g.value?re():(X(e.value.id+""),N(h,{message:"Survey updated correctly.",title:""}))}).catch(t=>{U(),Q(h,t)})},oe=function(){var O;const l=new FormData,t=Object.assign({},e.value);t.active_from=te(e.value.active_from),t.active_to=te(e.value.active_to),t.hidden_at=te(e.value.hidden_at),t.country_id=(O=t.country)==null?void 0:O.id,delete t.country,(n.value||t.id)&&We(e,t);const w=L.value.tmp_image;w&&w.image&&(t.image=w.image),t.answers=[];for(const ee in e.value.answers){const K=e.value.answers[ee];K.id?t.answers.push({}):t.answers.push(K)}return t.hide_results||(t.hide_results="false"),delete t.target_all,delete t.target_clusters,delete t.target_group_ids,delete t.target_groups,delete t.created_at,delete t.updated_at,delete t.can_edit,delete t.can_delete,Xe(l,t,"survey"),Ze(B,l,"survey"),l},Se=async function(){const l={formData:oe()};D.createSurvey(l).then(()=>{U(),X(T.value.id+""),N(h,{message:"Survey created correctly.",title:""}),Je.push({name:"survey-detail",params:{id:T.value.id}})}).catch(t=>{U(),Q(h,t)})},Te=function(){if(T.value){e.value=Object.assign({},T.value),T.value.active_from&&(e.value.active_from=ae(T.value.active_from+"")),T.value.active_to&&(e.value.active_to=ae(T.value.active_to+"")),T.value.hidden_at&&(e.value.hidden_at=ae(T.value.hidden_at+"")),ue(),$e(T,e);for(const l in e.value.answers)for(const t in e.value.answers[+l].translations){const w=e.value.answers[+l];delete w.translations[t].updated_at,delete w.translations[t].created_at}et(B,e),tt(L,e),J()}},Ae=function(){M(e.value.active_from),M(e.value.active_to),M(e.value.hidden_at),M(e.value.typology),e.value.questions.forEach(l=>{l[p.value]?M(l[p.value].text):H.value=!0,M(l.typology)})},ie=function(){if(f.value=!0,Ae(),H.value){N(h,{message:"Check that you have completed the required fields.",title:"",error:!0});return}n.value!=""||e.value.id?ke():Se(),f.value=!1,Z()},M=function(l){if(f.value)return l==""||l==null?H.value=!0:H.value=!1,H.value},qe=function(l,t){switch(l){case 1:{t?(e.value.target_clusters=[],e.value.target_group_ids=[],C.value=!1,b.value=!1):(b.value=!0,C.value=!0);break}case 2:{t?(C.value=!1,e.value.target_group_ids=[]):C.value=!0;break}case 3:{t?(b.value=!1,e.value.target_clusters=[]):b.value=!0;break}}},Fe=l=>{e.value.image_url="",e.value.image=l.files[0]},ue=function(){var l;e.value.answers||(e.value.answers=[]),_.value=[],(l=e.value.country.language_codes)==null||l.forEach((t,w)=>{_.value.push(t),R.value[t]="",G.value.push({field:"lang",header:t})})},Ue=function(){return e.value.online?"Status online":"Status offline"},De=async function(l){if(!(T.value.online&&e.value.online)){if(!T.value.online&&e.value.online){g.value=!0,ie();return}re()}},re=async function(){const l=new Map;l.set("online",e.value.online),l.set("survey_id",e.value.id),await D.changeStatusSurvey(l).then(()=>{X(e.value.id+""),N(h,{message:"Survey status changed correctly",title:""}),g.value=!1})},Ee=l=>{le.require({group:"push",target:l.currentTarget,message:"Are you sure you want to send the push notification?",icon:"pi pi-exclamation-triangle"})},Ie=async function(){Z(),await D.sendPush(e.value.id+"").then(()=>{N(h,{message:"Notification sent correctly.",title:"",error:!1}),de(),U()}).catch(l=>{U(),Q(h,l)})},de=function(){if(document.getElementsByClassName("p-confirm-dialog-reject")&&document.getElementsByClassName("p-confirm-dialog-reject")[0]){var l=document.getElementsByClassName("p-confirm-dialog-reject")[0];l.click()}if(document.getElementsByClassName("p-confirm-dialog-reject")&&document.getElementsByClassName("p-confirm-dialog-reject")[1]){var t=document.getElementsByClassName("p-confirm-dialog-reject")[1];t.click()}},J=function(){var l,t;u.value=[];for(let w=0;w<+e.value.questions_number;w++){let ee={title:"Question "+(w+1),content:""};if(u.value.push(ee),e.value.questions||(e.value.questions=[]),!e.value.questions[w]){const K={answers:[],translations:{}};(t=(l=e.value.country)==null?void 0:l.language_codes)==null||t.forEach(ze=>{K.translations[ze]={text:null}}),e.value.questions[w]=K}}S.value=0,document.getElementsByClassName("p-tabview-nav-link")&&document.getElementsByClassName("p-tabview-nav-link")[0]&&document.getElementsByClassName("p-tabview-nav-link")[0].click()},Be=function(l){var t,w,O;e.value.questions&&(e.value.questions[l.index]||(e.value.questions[l.index]={answers:[]}),(O=(w=(t=e.value)==null?void 0:t.questions[l.index])==null?void 0:w.answers)==null||O.push({translations:l.translation}))},Ne=function(l){e.value.questions[l.index].typology=l.typology},Qe=function(l){e.value.questions&&(e.value.questions[l.index].translations[l.lang].text=l.text)},je=function(l){let t=l;e.value.questions[t]&&(e.value.questions[t].id?(Re(e.value.questions[t].id),e.value.questions_number=e.value.questions_number-1):(e.value.questions.splice(t,1),I.value+=1,e.value.questions_number=e.value.questions_number-1,J()))},Re=async function(l){Z(),await D.deleteQuestion(l).then(()=>{N(h,{message:"Question successfully deleted",title:"",error:!1});for(let t=0;t<e.value.questions.length;t++)e.value.questions[t].id==l&&(e.value.questions.splice(t,1),I.value+=1);J(),U()}).catch(t=>{U(),Q(h,t)})},Le=(l,t)=>{le.require({group:"delete",target:l.currentTarget,message:"Are you sure you want to delete this question?",icon:"pi pi-exclamation-triangle",acceptLabel:t})},Me=()=>{e.value.hidden_at||(e.value.hidden_at=e.value.active_to)};return He(async()=>{var l,t;se(),n.value=Y.params.id+"",n.value!=""&&n.value!="undefined"?(X(n.value),a.value[0]={label:"Edit survey"}):(a.value[0]={label:"New survey"},e.value.country_id=ne.value.id,e.value.country=ne.value,e.value.online=!1,e.value.typology="open",e.value.can_edit=!0,e.value.translations||(e.value.translations={},_.value=[],(t=(l=e.value.country)==null?void 0:l.language_codes)==null||t.forEach(w=>{_.value.push(w),e.value.translations[w]={title:null,short_description:null,description:null}})),e.value.questions_number=1,J())}),{home:i,items:a,tmp_survey:e,filteredSurveys:z,allSurveys:pe,filters:xe,allGroups:Ve,newUser:A,showCheckboxAll:F,showSelectClusters:b,showSelectGroups:C,uploadedFile:j,newAnswer:s,userRoles:Ce,question:R,audienceCard:B,uploadImageCard:L,survey_status:m,tabs:u,active:S,submitForm:f,countForUpdate:I,languages:_,saveSurvey:ie,validateField:M,fetchAllSurveys:se,setSelected:qe,onSelectedFiles:Fe,populateSelectLanguages:ue,getTooltipValue:Ue,changeStatus:De,confirmSendPush:Ee,closePopup:de,sendPush:Ie,generateTab:J,updateAnswerFromTabQuestion:Be,updateTypologyFromTabQuestion:Ne,updateTextFromTabQuestion:Qe,confirmDelete:je,confirmDeleteQuestion:Le,updateVisibileUntil:Me}},components:{AudienceCard:nt,UploadImageCard:st,TabQuestionSurvey:It}};const Nt={class:"m-4"},Qt={class:"flex justify-content-between align-items-center mb-3"},jt={class:"flex align-items-center justify-content-between"},Rt=o("h2",{class:"mb-2"},"SURVEY DETAILS",-1),Lt={key:0,class:"field col-2 mb-0"},Mt={class:"formgrid grid col-10 px-0"},zt={class:"field col-3"},Ot=o("label",{for:"name"},"Active from*",-1),Pt={key:0,class:"p-error"},Gt={class:"field col-3"},Yt=o("label",{for:"name"},"Active to*",-1),Ht={key:0,class:"p-error"},Jt={class:"field col-4"},Kt=o("label",{for:"name"},"Visible until*",-1),Wt={key:0,class:"p-error"},Xt=o("div",{class:"flex align-items-center justify-content-between"},[o("h2",{class:"mb-3"},"SURVEY CONTENT")],-1),Zt={key:0,class:"formgrid grid col-12 px-0"},$t={class:"field col-5 flex flex-column"},ea={for:"title"},ta={class:"uppercase"},aa=o("span",{class:"text-sm font-italic"},"Maximum 210 characters",-1),la={key:0,class:"p-error"},na={key:0,class:"field col-5 flex flex-column"},sa={for:"title"},oa={class:"uppercase"},ia=o("span",{class:"text-sm font-italic"},"Maximum 210 characters",-1),ua={key:0,class:"p-error"},ra={key:1,class:"flex formgrid grid col-12 align-items-center"},da={class:"field col-2 flex flex-column"},ca=o("label",{for:"note"},"Number of questions* ",-1),ma=o("div",{class:"col-1"},null,-1),va={class:"field-checkbox col-6 mt-4"},ga=o("label",{for:"binary"},"Hide replies to users",-1),_a=["onClick"],ya={class:"flex p-4 align-items-center"},fa={class:"pl-2"},ha={class:"flex p-3 align-items-center"},wa={class:"pl-2"},ba={class:"flex align-items-center pb-3 justify-content-end"},xa={class:"flex p-3 align-items-center"},pa={class:"pl-2"},Ca={class:"flex align-items-center pb-3 justify-content-end"};function Va(i,n,a,e,I,z){const f=x("Breadcrumb"),A=x("Button"),F=x("Dropdown"),b=x("Calendar"),C=x("Card"),j=x("AudienceCard"),s=x("UploadImageCard"),p=x("InputText"),R=x("Checkbox"),G=x("TabQuestionSurvey"),B=x("TabPanel"),L=x("TabView"),m=x("ConfirmPopup"),g=_e("tooltip");return d(),v(ce,null,[o("div",Nt,[o("div",Qt,[c(f,{home:e.home,model:e.items,class:"mt-0 p-0"},null,8,["home","model"]),o("div",null,[e.tmp_survey.id?(d(),E(A,{key:0,label:"Send push",onClick:n[0]||(n[0]=u=>e.confirmSendPush(u)),class:"mr-3 p-button-outlined",icon:"pi pi-envelope"})):y("",!0),c(A,{label:"Save",onClick:e.saveSurvey,disabled:!e.tmp_survey.can_edit},null,8,["onClick","disabled"])])]),c(C,null,{content:k(()=>[o("div",jt,[Rt,e.tmp_survey.country?(d(),v("div",Lt,[c(F,{modelValue:e.tmp_survey.online,"onUpdate:modelValue":n[1]||(n[1]=u=>e.tmp_survey.online=u),options:e.survey_status,optionLabel:"label",optionValue:"value",class:"w-full capitalize dropdown-status",onChange:n[2]||(n[2]=u=>e.changeStatus(u))},null,8,["modelValue","options"])])):y("",!0)]),o("div",Mt,[o("div",zt,[Ot,c(b,{inputId:"dateformat",modelValue:e.tmp_survey.active_from,"onUpdate:modelValue":n[3]||(n[3]=u=>e.tmp_survey.active_from=u),dateFormat:"dd/mm/yy",manualInput:!1,class:q({"p-invalid":e.validateField(e.tmp_survey.active_from)}),placeholder:"gg/mm/aaaa"},null,8,["modelValue","class"]),e.validateField(e.tmp_survey.active_from)?(d(),v("small",Pt,"Campo obbligatorio.")):y("",!0)]),o("div",Gt,[Yt,c(b,{inputId:"dateformat",modelValue:e.tmp_survey.active_to,"onUpdate:modelValue":n[4]||(n[4]=u=>e.tmp_survey.active_to=u),dateFormat:"dd/mm/yy",manualInput:!1,class:q({"p-invalid":e.validateField(e.tmp_survey.active_to)}),onDateSelect:n[5]||(n[5]=u=>e.updateVisibileUntil())},null,8,["modelValue","class"]),e.validateField(e.tmp_survey.active_to)?(d(),v("small",Ht,"Campo obbligatorio.")):y("",!0)]),o("div",Jt,[Kt,c(b,{inputId:"dateformat",modelValue:e.tmp_survey.hidden_at,"onUpdate:modelValue":n[6]||(n[6]=u=>e.tmp_survey.hidden_at=u),dateFormat:"dd/mm/yy",manualInput:!1,class:q({"p-invalid":e.validateField(e.tmp_survey.hidden_at)})},null,8,["modelValue","class"]),e.validateField(e.tmp_survey.hidden_at)?(d(),v("small",Wt,"Campo obbligatorio.")):y("",!0)])])]),_:1}),$(c(j,{ref:"audienceCard"},null,512),[[me,e.tmp_survey.country]]),$(c(s,{title:"SURVEY IMAGE",videoUrl:!1,ref:"uploadImageCard",dynamicClass:"col-5",class:"mt-3"},null,512),[[me,e.tmp_survey.country]]),c(C,{class:"mt-4"},{content:k(()=>{var u,S;return[Xt,e.tmp_survey&&e.tmp_survey.translations&&((u=e.tmp_survey.country)!=null&&u.language_codes)?(d(),v("div",Zt,[o("div",$t,[o("label",ea,[P("Title* "),o("span",ta,"("+V(e.languages[0])+")",1)]),c(p,{id:"title",type:"text",modelValue:e.tmp_survey.translations[e.languages[0]].title,"onUpdate:modelValue":n[7]||(n[7]=_=>e.tmp_survey.translations[e.languages[0]].title=_),class:q({"p-invalid":e.validateField(e.tmp_survey.translations[e.languages[0]].title)}),maxlength:"210"},null,8,["modelValue","class"]),aa,e.validateField(e.tmp_survey.translations[e.languages[0]].title)?(d(),v("small",la,"Campo obbligatorio.")):y("",!0)]),(S=e.tmp_survey.country)!=null&&S.language_codes&&e.languages[1]?(d(),v("div",na,[o("label",sa,[P("Title* "),o("span",oa,"("+V(e.languages[1])+")",1)]),c(p,{id:"title",type:"text",modelValue:e.tmp_survey.translations[e.languages[1]].title,"onUpdate:modelValue":n[8]||(n[8]=_=>e.tmp_survey.translations[e.languages[1]].title=_),class:q({"p-invalid":e.validateField(e.tmp_survey.translations[e.languages[1]].title)}),maxlength:"210"},null,8,["modelValue","class"]),ia,e.validateField(e.tmp_survey.translations[e.languages[1]].title)?(d(),v("small",ua,"Campo obbligatorio.")):y("",!0)])):y("",!0)])):y("",!0),e.tmp_survey&&e.tmp_survey.translations?(d(),v("div",ra,[o("div",da,[ca,c(F,{modelValue:e.tmp_survey.questions_number,"onUpdate:modelValue":n[9]||(n[9]=_=>e.tmp_survey.questions_number=_),options:[1,2,3,4,5],class:"capitalize",onChange:n[10]||(n[10]=_=>e.generateTab())},null,8,["modelValue"])]),ma,o("div",va,[c(R,{inputId:"binary",binary:!0,disabled:!e.showCheckboxAll,modelValue:e.tmp_survey.hide_results,"onUpdate:modelValue":n[11]||(n[11]=_=>e.tmp_survey.hide_results=_)},null,8,["disabled","modelValue"]),ga])])):y("",!0),c(L,{activeIndex:e.active,"onUpdate:activeIndex":n[15]||(n[15]=_=>e.active=_)},{default:k(()=>[(d(!0),v(ce,null,Ke(e.tabs,(_,Y)=>(d(),E(B,{key:Y},{header:k(()=>[o("span",null,V(_.title),1),e.tmp_survey.questions.length>1?$((d(),v("i",{key:0,class:"pi pi-times",onClick:h=>e.confirmDeleteQuestion(h,Y)},null,8,_a)),[[g,"Delete",void 0,{top:!0}]]):y("",!0)]),default:k(()=>[(d(),E(G,{index:Y,tmp_survey:e.tmp_survey,languages:e.languages,submitForm:e.submitForm,key:e.countForUpdate,onUpdateAnswer:n[12]||(n[12]=h=>e.updateAnswerFromTabQuestion(h)),onUpdateTypology:n[13]||(n[13]=h=>e.updateTypologyFromTabQuestion(h)),onUpdateText:n[14]||(n[14]=h=>e.updateTextFromTabQuestion(h))},null,8,["index","tmp_survey","languages","submitForm"]))]),_:2},1024))),128))]),_:1},8,["activeIndex"])]}),_:1})]),c(m,null,{message:k(u=>[o("div",ya,[o("i",{class:q(u.message.icon),style:{"font-size":"1.5rem"}},null,2),o("p",fa,V(u.message.message),1)])]),_:1}),c(m,{group:"push",id:"push"},{message:k(u=>[o("div",ha,[o("i",{class:q(u.message.icon),style:{"font-size":"1.5rem"}},null,2),o("p",wa,V(u.message.message),1)]),o("div",ba,[c(A,{label:"Cancel",class:"mr-3 p-button-text text-500",onClick:e.closePopup},null,8,["onClick"]),c(A,{label:"Send",class:"mr-4",onClick:e.sendPush},null,8,["onClick"])])]),_:1}),c(m,{group:"delete",id:"delete"},{message:k(u=>[o("div",xa,[o("i",{class:q(u.message.icon),style:{"font-size":"1.5rem"}},null,2),o("p",pa,V(u.message.message),1)]),o("div",Ca,[c(A,{label:"No",class:"mr-3 p-button-text text-500",onClick:e.closePopup},null,8,["onClick"]),c(A,{label:"Yes",class:"mr-4",onClick:S=>{var _;return e.confirmDelete((_=u.message)==null?void 0:_.acceptLabel)}},null,8,["onClick"])])]),_:1})],64)}const Na=ge(Bt,[["render",Va]]);export{Na as default};
