import{d as L,ab as P,u as U,ac as j,r as b,s as k,c as B,a as N,_ as R,b as d,o as u,e as c,g as r,v,f as t,l as $,x as h,i as S}from"./usetoast.esm67435.js";import{u as T,r as _}from"./index.esm67435.js";import{s as x,h as g,e as z}from"./helpers67435.js";import{u as I,L as M}from"./sidebar67435.js";import"./country67435.js";import{u as q}from"./user67435.js";import{a as A}from"./runtime-dom.esm-bundler67435.js";const D=L({name:"LoginView",setup(){P(()=>{m.setSidebarVisibility(!1)});const e=U(),o=j(),m=I(),f=b(1),a=k({password:"",password_confirmation:""}),w={password:{required:_},password_confirmation:{required:_}},n=b(!1),i=T(w,a),l=B(()=>e.user),p=q();return{formStep:f,formSubmitted:n,v$:i,currentUser:l,handleSubmit:V=>{if(n.value=!0,!V)return;const y={id:l.value.id,password:a.password,password_confirmation:a.password_confirmation};x(),p.changePassword(y).then(()=>{g(),m.setSidebarVisibility(!0),N.push({name:"login"})}).catch(C=>{g(),z(o,C)})}}},components:{LogoPetronas:M}}),E={class:"flex justify-content-center align-items-center h-screen"},W={class:"mt-5 text-center"},F=t("h1",{class:"text-center mb-2"},"Reset password",-1),G=t("h2",{class:"font-normal mb-4"},"Welcome! Please enter your new password.",-1),H={class:"flex justify-content-between mt-1"},J={key:0,class:"p-error col-5 p-0 m-0"},K={class:"w-full flex flex-column flex-1"},O={class:"flex justify-content-between mt-1"},Q={key:0,class:"p-error col-5 p-0 m-0"},X={class:"mt-2 text-right w-full mb-3"};function Y(e,o,m,f,a,w){const n=d("LogoPetronas"),i=d("InputText"),l=d("Button"),p=d("Card");return u(),c("div",E,[r(p,{class:"p-4"},{header:v(()=>[t("div",W,[r(n)])]),content:v(()=>[F,G,t("form",{class:"mt-4 flex flex-column",onSubmit:o[2]||(o[2]=A(s=>e.handleSubmit(!e.v$.$invalid),["prevent"]))},[r(i,{id:"password",class:$({"p-invalid":e.v$.password.$invalid&&e.formSubmitted,"w-100":!0,"mt-3":!0,"mb-1":!0}),type:"password",placeholder:"New password*",modelValue:e.v$.password.$model,"onUpdate:modelValue":o[0]||(o[0]=s=>e.v$.password.$model=s)},null,8,["class","modelValue"]),t("div",H,[e.formSubmitted&&e.v$.password.$errors.length>0?(u(),c("label",J,h(e.v$.password.$errors.map(s=>s.$message).join("<br />")),1)):S("",!0)]),t("div",K,[r(i,{id:"password_confirmation",class:$({"p-invalid":e.v$.password.$invalid&&e.formSubmitted,"w-100":!0,"mt-3":!0,"mb-1":!0}),type:"password",placeholder:"Confirm password*",modelValue:e.v$.password.$model,"onUpdate:modelValue":o[1]||(o[1]=s=>e.v$.password.$model=s)},null,8,["class","modelValue"]),t("div",O,[e.formSubmitted&&e.v$.password.$errors.length>0?(u(),c("label",Q,h(e.v$.password.$errors.map(s=>s.$message).join("<br />")),1)):S("",!0)])]),t("div",X,[r(l,{type:"submit",label:"Reset",class:"w-full mt-4 capitalize"})])],32)]),_:1})])}const ne=R(D,[["render",Y]]);export{ne as default};
