import{a as D}from"./api.esm96104.js";import{u as $,e as K,r as P}from"./usetoast.esm96104.js";import{u as T}from"./user96104.js";import{u as O}from"./country96104.js";import{e as R}from"./helpers96104.js";import{ad as E,c as w,r as y,_ as B,a as d,i as z,o as m,b as h,f as t,q as u,y as A,g as S,j as k,w as N,e as x,t as j}from"./_plugin-vue_export-helper96104.js";import{w as V}from"./runtime-dom.esm-bundler96104.js";const I={setup(){E(()=>{v.value=!0,a.value={first:0,rows:_.value.rows,sortField:null,sortOrder:null,filters:r.value},D.register("myfilter",(o,C)=>o===C),e()});const p=T(),s=O(),b=$(),l=w(()=>p.responseUsers),g=w(()=>s.allCountries),U=w(()=>p.userRoles),f=w(()=>b.getSelectedCountry),i=K(),_=y(),r=y({sellout_code:{value:"",matchMode:"contains"},role:{value:"",matchMode:"contains"},full_name:{value:"",matchMode:"contains"},company_name:{value:"",matchMode:"contains"},country:{value:f.value.id,matchMode:"contains"}}),v=y(!0),a=y(),F=y(0),M=y([{label:"My Filter",value:"myfilter"}]);function e(){v.value=!0;const o=new Map;o.set("country_id",r.value.country.value),o.set("company_name",r.value.company_name.value),o.set("role",r.value.role.value),o.set("sellout_code",r.value.sellout_code.value),o.set("full_name",r.value.full_name.value),o.set("page",a.value.page+1),o.set("per_page",a.value.rows),a.value.sortField&&(a.value.sortOrder==1?o.set("sorted_by",a.value.sortField+"_asc"):o.set("sorted_by",a.value.sortField+"_desc")),setTimeout(()=>{c(o)},Math.random()*1e3+250)}const c=async function(o){await p.fetchAllUsers(o).then(()=>{v.value=!1}).catch(C=>{v.value=!1,R(i,C)})};return{dt:_,responseUsers:l,filters:r,loading:v,totalRecords:F,lazyParams:a,loadLazyData:e,matchModes:M,countries:g,userRoles:U,onPage:o=>{a.value=o,e()},onSort:o=>{a.value=o,e()},onFilter:()=>{a.value.page=0,a.value.filters=r.value,e()},toggleEdit:function(o){P.push({name:"user-detail",params:{id:o.id}})}}}};const L=x("div",{class:"w-full text-center"},"Active",-1),q={key:0,class:"pi pi-check text-color-secondary"},G={key:1,class:"pi pi-times text-red-600"};function H(p,s,b,l,g,U){const f=d("InputText"),i=d("Column"),_=d("Badge"),r=d("Dropdown"),v=d("Button"),a=d("DataTable"),F=d("ConfirmPopup"),M=z("tooltip");return m(),h("div",null,[t(a,{value:l.responseUsers.users,totalRecords:l.responseUsers.total,lazy:!0,paginator:!0,rows:30,filters:l.filters,"onUpdate:filters":s[0]||(s[0]=e=>l.filters=e),ref:"dt",dataKey:"id",loading:l.loading,onPage:s[1]||(s[1]=e=>l.onPage(e)),onSort:s[2]||(s[2]=e=>l.onSort(e)),onFilter:s[3]||(s[3]=e=>l.onFilter()),filterDisplay:"row",removableSort:""},{empty:u(()=>[A(" No users found. ")]),default:u(()=>[t(i,{field:"sellout_code",header:"Sellout code",filterMatchMode:"contains",ref:"sellout_code",sortable:!0,showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1},{filter:u(({filterModel:e,filterCallback:c})=>[t(f,{type:"text",modelValue:e.value,"onUpdate:modelValue":n=>e.value=n,onKeydown:V(n=>c(),["enter"]),class:"p-column-filter",placeholder:"Filter by sellout code"},null,8,["modelValue","onUpdate:modelValue","onKeydown"])]),_:1},512),t(i,{field:"full_name",header:"Full name",filterMatchMode:"contains",ref:"full_name",sortable:!1,showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1},{filter:u(({filterModel:e,filterCallback:c})=>[t(f,{type:"text",modelValue:e.value,"onUpdate:modelValue":n=>e.value=n,onKeydown:V(n=>c(),["enter"]),class:"p-column-filter",placeholder:"Filter by full name"},null,8,["modelValue","onUpdate:modelValue","onKeydown"])]),_:1},512),t(i,{field:"company_name",header:"Company",filterMatchMode:"contains",ref:"company_name",sortable:!1,showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1},{filter:u(({filterModel:e,filterCallback:c})=>[t(f,{type:"text",modelValue:e.value,"onUpdate:modelValue":n=>e.value=n,onKeydown:V(n=>c(),["enter"]),class:"p-column-filter",placeholder:"Filter by company"},null,8,["modelValue","onUpdate:modelValue","onKeydown"])]),_:1},512),t(i,{field:"role",header:"Cluster",filterMatchMode:"contains",ref:"role",sortable:!1,showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1},{body:u(({data:e})=>[e.role=="dealer"?(m(),S(_,{key:0,value:"Distributor",class:k(["px-4",e.role])},null,8,["class"])):(m(),S(_,{key:1,value:e.role,class:k(["px-4",e.role])},null,8,["value","class"]))]),filter:u(({filterModel:e,filterCallback:c})=>[t(r,{modelValue:e.value,"onUpdate:modelValue":n=>e.value=n,options:l.userRoles,optionValue:"value",optionLabel:"name",onChange:n=>c(),placeholder:"Filter by cluster"},null,8,["modelValue","onUpdate:modelValue","options","onChange"])]),_:1},512),t(i,{header:"",bodyStyle:"text-align: center",style:{width:"8rem"}},{header:u(()=>[L]),body:u(({data:e})=>[e.enabled?(m(),h("i",q)):(m(),h("i",G))]),_:1}),t(i,{header:"",style:{width:"4rem"}},{body:u(({data:e})=>[N(t(v,{type:"button",onClick:c=>l.toggleEdit(e),"aria-haspopup":"true","aria-controls":"overlay_menu",class:"p-button-text p-button-rounded text-300 surface-200 mr-3",icon:"pi pi-pencil"},null,8,["onClick"]),[[M,"Edit",void 0,{top:!0}]])]),_:1})]),_:1},8,["value","totalRecords","filters","loading"]),t(F)])}const J=B(I,[["render",H]]),Q={setup(){const p=T();return{totalUser:w(()=>p.getTotalUsers)}},components:{UsersTable:J}},W={class:"flex justify-content-between align-items-center"},X={class:"uppercase"},Y={key:0},Z={key:1};function ee(p,s,b,l,g,U){const f=d("Button"),i=d("UsersTable"),_=d("Card");return m(),h("div",null,[t(_,null,{content:u(()=>[x("div",W,[x("h1",X,[l.totalUser==1?(m(),h("span",Y," 1 User")):(m(),h("span",Z,j(l.totalUser)+" Users",1))]),t(f,{label:"user",onClick:s[0]||(s[0]=r=>p.$router.push("/user-detail")),icon:"pi pi-plus",class:"mb-3"})]),t(i)]),_:1})])}const de=B(Q,[["render",ee]]);export{de as default};
