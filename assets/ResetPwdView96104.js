import{u as L,e as j,r as P}from"./usetoast.esm96104.js";import{u as U,r as b}from"./index.esm96104.js";import{s as k,h as $,e as B}from"./helpers96104.js";import{u as N,L as R}from"./sidebar96104.js";import"./country96104.js";import{u as T}from"./user96104.js";import{d as q,ad as z,r as h,m as I,c as M,_ as x,a as l,o as u,b as c,f as r,q as v,e as t,j as S,t as _,h as V}from"./_plugin-vue_export-helper96104.js";import{a as A}from"./runtime-dom.esm-bundler96104.js";const D=q({name:"LoginView",setup(){z(()=>{m.setSidebarVisibility(!1)});const e=L(),o=j(),m=N(),f=h(1),a=I({password:"",password_confirmation:""}),w={password:{required:b},password_confirmation:{required:b}},n=h(!1),i=U(w,a),d=M(()=>e.user),p=T();return{formStep:f,formSubmitted:n,v$:i,currentUser:d,handleSubmit:g=>{if(n.value=!0,!g)return;const y={id:d.value.id,password:a.password,password_confirmation:a.password_confirmation};k(),p.changePassword(y).then(()=>{$(),m.setSidebarVisibility(!0),P.push({name:"login"})}).catch(C=>{$(),B(o,C)})}}},components:{LogoPetronas:R}}),E={class:"flex justify-content-center align-items-center h-screen"},W={class:"mt-5 text-center"},F=t("h1",{class:"text-center mb-2"},"Reset password",-1),G=t("h2",{class:"font-normal mb-4"},"Welcome! Please enter your new password.",-1),H={class:"flex justify-content-between mt-1"},J={key:0,class:"p-error col-5 p-0 m-0"},K={class:"w-full flex flex-column flex-1"},O={class:"flex justify-content-between mt-1"},Q={key:0,class:"p-error col-5 p-0 m-0"},X={class:"mt-2 text-right w-full mb-3"};function Y(e,o,m,f,a,w){const n=l("LogoPetronas"),i=l("InputText"),d=l("Button"),p=l("Card");return u(),c("div",E,[r(p,{class:"p-4"},{header:v(()=>[t("div",W,[r(n)])]),content:v(()=>[F,G,t("form",{class:"mt-4 flex flex-column",onSubmit:o[2]||(o[2]=A(s=>e.handleSubmit(!e.v$.$invalid),["prevent"]))},[r(i,{id:"password",class:S({"p-invalid":e.v$.password.$invalid&&e.formSubmitted,"w-100":!0,"mt-3":!0,"mb-1":!0}),type:"password",placeholder:"New password*",modelValue:e.v$.password.$model,"onUpdate:modelValue":o[0]||(o[0]=s=>e.v$.password.$model=s)},null,8,["class","modelValue"]),t("div",H,[e.formSubmitted&&e.v$.password.$errors.length>0?(u(),c("label",J,_(e.v$.password.$errors.map(s=>s.$message).join("<br />")),1)):V("",!0)]),t("div",K,[r(i,{id:"password_confirmation",class:S({"p-invalid":e.v$.password.$invalid&&e.formSubmitted,"w-100":!0,"mt-3":!0,"mb-1":!0}),type:"password",placeholder:"Confirm password*",modelValue:e.v$.password.$model,"onUpdate:modelValue":o[1]||(o[1]=s=>e.v$.password.$model=s)},null,8,["class","modelValue"]),t("div",O,[e.formSubmitted&&e.v$.password.$errors.length>0?(u(),c("label",Q,_(e.v$.password.$errors.map(s=>s.$message).join("<br />")),1)):V("",!0)])]),t("div",X,[r(d,{type:"submit",label:"Reset",class:"w-full mt-4 capitalize"})])],32)]),_:1})])}const ie=x(D,[["render",Y]]);export{ie as default};
