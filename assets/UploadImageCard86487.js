import{i as b,s as C,h as v,a as S,e as U}from"./helpers86487.js";import{aq as V,ad as B,r as x,af as k,_ as F,b as c,e as m,i as I,B as u,g as t,C as y,m as T,h as g,f,j as h}from"./usetoast.esm86487.js";class A{static async deleteAttachment(a){return(await V(`/attachments/${a}`)).data}}const N=B({id:"attachment",state:()=>({attachment:{}}),getters:{},actions:{async deleteAttachment(s){await A.deleteAttachment(s)}}}),z={props:{title:String,videoUrl:Boolean,dynamicClass:String},setup(s,a){const o=x({}),e=N(),d=k(),r=x(),_=s.dynamicClass?s.dynamicClass:"col-6",p=l=>{o.value.image_url={},o.value.image=l.files[0]},n=async l=>{l&&(C(),await e.deleteAttachment(l).then(()=>{v(),S(d,{message:"File deleted correctly.",title:""}),i()}).catch(w=>{v(),U(d,w)}))},i=()=>{o.value.image=null,o.value.image_url=null,r.value.files=[]};return a.expose({tmp_image:o,deleteImage:n}),{tmp_image:o,fileUpload:r,dynamicCl:_,deleteTmpImage:i,onSelectedFiles:p,deleteImage:n,getFileName:b}}},j={class:"flex align-items-center justify-content-between"},D={class:"mb-4"},L={class:"flex"},M={key:0,class:"flex flex-wrap"},R={class:"card m-0 flex border-1 surface-border align-items-center justify-content-between pl-4 pr-3 py-3 w-full my-2"},q={class:"flex align-items-center"},E=["src"],Y={class:"flex flex-column ml-2",style:{"font-size":"12px"}},G={key:0,class:"text-center"},H=t("b",null,"Drag and drop file to here to upload.",-1),J=t("p",{class:"text-xs"},"(Maximum size 2 MB, 1000x1000px)",-1),K=[H,J],O={key:0,class:"ml-4 col-5"},P={class:"field"},Q=t("label",{for:"video_url"},"Video Url (YouTube, Vimeo)",-1);function W(s,a,o,e,d,r){const _=c("Button"),p=c("FileUpload"),n=c("InputText"),i=c("Card");return m(),I(i,{class:"h-full"},{content:u(()=>[t("div",j,[t("h2",D,y(o.title),1)]),t("div",L,[t("div",{class:T(["flex-column p-0",e.dynamicCl])},[g(p,{name:"file",url:"https://www.primefaces.org/upload.php",multiple:!1,accept:"image/*",maxFileSize:2e6,id:"logo",modelValue:e.tmp_image.image,"onUpdate:modelValue":a[1]||(a[1]=l=>e.tmp_image.image=l),customUpload:!0,onSelect:e.onSelectedFiles,onRemove:e.deleteTmpImage,fileLimit:1,ref:"fileUpload"},{content:u(()=>[e.tmp_image.image_url&&e.tmp_image.image_url.url?(m(),f("div",M,[t("div",R,[t("div",q,[t("img",{role:"presentation",src:e.tmp_image.image_url.url,width:"50",class:"shadow-2"},null,8,E),t("div",Y,y(e.getFileName(e.tmp_image.image_url.url)),1)]),g(_,{icon:"pi pi-times",onClick:a[0]||(a[0]=l=>e.deleteImage(e.tmp_image.image_url.id)),class:"p-button p-component p-button-icon-only p-fileupload-file-remove p-button-text p-button-danger p-button-rounded"})])])):h("",!0)]),empty:u(()=>[e.tmp_image.image_url?h("",!0):(m(),f("div",G,K))]),_:1},8,["modelValue","onSelect","onRemove"])],2),o.videoUrl?(m(),f("div",O,[t("div",P,[Q,g(n,{type:"text",modelValue:e.tmp_image.video_url,"onUpdate:modelValue":a[2]||(a[2]=l=>e.tmp_image.video_url=l),class:"w-full"},null,8,["modelValue"])])])):h("",!0)])]),_:1})}const $=F(z,[["render",W]]);export{$ as U,N as u};
