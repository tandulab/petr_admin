import{s as w,h as f,a as b,e as U}from"./helpers40966.js";import{an as y,a9 as S,r as v,ac as V,_ as k,b as p,k as C,o as c,h as I,v as u,f as a,x as T,g as x,e as g,w as A,i as h}from"./usetoast.esm40966.js";class B{static async deleteAttachment(t){return(await y(`/attachments/${t}`)).data}}const D=S({id:"attachment",state:()=>({attachment:{}}),getters:{},actions:{async deleteAttachment(i){await B.deleteAttachment(i)}}}),F={props:{title:String,videoUrl:Boolean},setup(i,t){const o=v({}),e=D(),m=V(),r=v(),d=l=>{o.value.image_url={},o.value.image=l.files[0]},_=l=>{l&&(w(),e.deleteAttachment(l).then(()=>{f(),b(m,{message:"File deleted correctly.",title:""}),n()}).catch(s=>{f(),U(m,s)}))},n=()=>{o.value.image=null,o.value.image_url=null,r.value.files=[]};return t.expose({tmp_image:o}),{tmp_image:o,fileUpload:r,deleteTmpImage:n,onSelectedFiles:d,deleteImage:_}}},L={class:"flex align-items-center justify-content-between"},N={class:"mb-4"},z={class:"flex col-10"},M={class:"col-6 flex-column p-0"},R={key:0,class:"flex align-items-top"},j=["src"],E={key:0,class:"text-center"},Y=a("b",null,"Drag and drop file to here to upload.",-1),q=a("p",{class:"text-xs"},"(Maximum size 2 MB, 1000x1000px)",-1),G=[Y,q],H={key:0,class:"ml-4 col-5"},J={class:"field"},K=a("label",{for:"video_url"},"Video Url (YouTube, Vimeo)",-1);function O(i,t,o,e,m,r){const d=p("FileUpload"),_=p("InputText"),n=p("Card"),l=C("tooltip");return c(),I(n,{class:"mt-4"},{content:u(()=>[a("div",L,[a("h2",N,T(o.title),1)]),a("div",z,[a("div",M,[x(d,{name:"file",url:"https://www.primefaces.org/upload.php",multiple:!1,accept:"image/*",maxFileSize:2e6,id:"logo",modelValue:e.tmp_image.image,"onUpdate:modelValue":t[1]||(t[1]=s=>e.tmp_image.image=s),customUpload:!0,onSelect:e.onSelectedFiles,onRemove:e.deleteTmpImage,fileLimit:1,ref:"fileUpload"},{content:u(()=>[e.tmp_image.image_url&&e.tmp_image.image_url.url?(c(),g("div",R,[a("img",{role:"presentation",class:"p-fileupload-file-thumbnail h-4rem w-7rem",src:e.tmp_image.image_url.url,style:{border:"1px solid rgb(0 0 0 / 6%)"}},null,8,j),A(a("i",{class:"pi pi-times p-button-icon text-red-600 cursor-pointer font-semibold icon-delete",onClick:t[0]||(t[0]=s=>e.deleteImage(e.tmp_image.image_url.id))},null,512),[[l,"Delete",void 0,{top:!0}]])])):h("",!0)]),empty:u(()=>[e.tmp_image.image_url?h("",!0):(c(),g("div",E,G))]),_:1},8,["modelValue","onSelect","onRemove"])]),o.videoUrl?(c(),g("div",H,[a("div",J,[K,x(_,{type:"text",modelValue:e.tmp_image.video_url,"onUpdate:modelValue":t[2]||(t[2]=s=>e.tmp_image.video_url=s),class:"w-full"},null,8,["modelValue"])])])):h("",!0)])]),_:1})}const W=k(F,[["render",O]]);export{W as U,D as u};
