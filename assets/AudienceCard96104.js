import{e as C}from"./helpers96104.js";import{u as S}from"./group96104.js";import{u as V}from"./user96104.js";import{e as k}from"./usetoast.esm96104.js";import{c as f,r as c,n as w,_ as G,a as u,o as A,g as y,q as U,e as l,f as d}from"./_plugin-vue_export-helper96104.js";const I={setup(g,o){const _=f(()=>i.allGroups),e=f(()=>m.userRoles),i=S(),m=V(),s=c(!0),n=c(!0),a=c(!0),t=c({}),b=k(),v=function(p,r){switch(p){case 1:{r?(t.value.target_clusters=[],t.value.target_group_ids=[],s.value=!1,a.value=!1):(a.value=!0,s.value=!0);break}case 2:{r?(s.value=!1,t.value.target_group_ids=[],t.value.target_all=!1):s.value=!0;break}case 3:{r?(a.value=!1,t.value.target_clusters=[],t.value.target_all=!1):a.value=!0;break}}};o.expose({tmp_audience:t});const h=async function(p){const r=new Map;await i.fetchAllGroups(r).catch(x=>{C(b,x)})};return w(async()=>{h()}),{allGroups:_,showSelectGroups:s,showCheckboxAll:n,showSelectClusters:a,tmp_audience:t,userRoles:e,setSelected:v}}},B=l("div",{class:"flex align-items-center justify-content-between"},[l("h2",{class:"mb-0"},"AUDIENCE")],-1),M={class:"formgrid grid col-10 px-0 align-items-center"},N={class:"field col-2 mt-4 mb-0"},R={class:"field-checkbox"},z=l("label",{for:"binary"},"All users",-1),E={class:"field col-4 flex flex-column"},L=l("label",{for:"cluster"},"Cluster",-1),T={class:"field col-4 flex flex-column"},j=l("label",{for:"cluster"},"Groups",-1);function q(g,o,_,e,i,m){const s=u("Checkbox"),n=u("MultiSelect"),a=u("Card");return A(),y(a,{class:"mt-4"},{content:U(()=>[B,l("div",M,[l("div",N,[l("div",R,[d(s,{inputId:"binary",modelValue:e.tmp_audience.target_all,"onUpdate:modelValue":o[0]||(o[0]=t=>e.tmp_audience.target_all=t),binary:!0,disabled:!e.showCheckboxAll,onChange:o[1]||(o[1]=t=>e.setSelected(1,e.tmp_audience.target_all))},null,8,["modelValue","disabled"]),z])]),l("div",E,[L,d(n,{id:"cluster",modelValue:e.tmp_audience.target_clusters,"onUpdate:modelValue":o[2]||(o[2]=t=>e.tmp_audience.target_clusters=t),options:e.userRoles,class:"capitalize",optionLabel:"name",optionValue:"value",disabled:!e.showSelectClusters,onChange:o[3]||(o[3]=t=>e.setSelected(2,e.tmp_audience.target_clusters.length>0)),closeIcon:""},null,8,["modelValue","options","disabled"])]),l("div",T,[j,d(n,{id:"cluster",modelValue:e.tmp_audience.target_group_ids,"onUpdate:modelValue":o[4]||(o[4]=t=>e.tmp_audience.target_group_ids=t),options:e.allGroups,class:"capitalize",optionLabel:"name",optionValue:"id",disabled:!e.showSelectGroups,onChange:o[5]||(o[5]=t=>e.setSelected(3,e.tmp_audience.target_group_ids.length>0)),closeIcon:""},null,8,["modelValue","options","disabled"])])])]),_:1})}const O=G(I,[["render",q]]);export{O as A};
